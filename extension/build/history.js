// Generated by CoffeeScript 1.6.3
(function() {
  chrome.utils.d.log("History!");

  chrome.archive = chrome.archive || {};

  chrome.archive = {
    background: chrome.extension.getBackgroundPage(),
    start: function() {
      var storage;
      storage = this.background.localStorage.getItem('songsHistory');
      if (storage == null) {
        return this.background.localStorage.setItem('songsHistory', JSON.stringify({
          elements: []
        }));
      }
    },
    storage: function() {
      var storage;
      storage = this.background.localStorage.getItem('songsHistory');
      return JSON.parse(storage);
    },
    search: function(string) {
      var element, _i, _len, _ref;
      _ref = this.storage().elements;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        element = _ref[_i];
        if (element === string) {
          return true;
        }
      }
      return null;
    },
    push: function(string) {
      var json;
      json = this.storage();
      if (!this.search(string)) {
        json.elements.push(string);
        return this.background.localStorage.setItem('songsHistory', JSON.stringify(json));
      }
    },
    sync: function() {
      return chrome.utils.d.log("sync");
    }
  };

  chrome.archive.start();

}).call(this);
